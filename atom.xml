<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>李宁的学习笔记</title>
  <icon>https://www.gravatar.com/avatar/e7a7b93fe2dd11e7e273e2c659673b5f</icon>
  <subtitle>Step by Step</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://github.com/leeningzzu/leeningzzu.github.io/"/>
  <updated>2019-05-15T12:25:17.723Z</updated>
  <id>https://github.com/leeningzzu/leeningzzu.github.io/</id>
  
  <author>
    <name>StatLee</name>
    <email>leeningzzu@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>贝叶斯估计、极大似然估计、最大后验概率估计</title>
    <link href="https://github.com/leeningzzu/leeningzzu.github.io/posts/5f4961b2/"/>
    <id>https://github.com/leeningzzu/leeningzzu.github.io/posts/5f4961b2/</id>
    <published>2019-05-10T04:56:06.000Z</published>
    <updated>2019-05-15T12:25:17.723Z</updated>
    
    <content type="html"><![CDATA[<h2 id="频率学派与贝叶斯学派"><a href="#频率学派与贝叶斯学派" class="headerlink" title="频率学派与贝叶斯学派"></a>频率学派与贝叶斯学派</h2><p>频率学派与贝叶斯学派探讨「不确定性」这件事时的出发点与立足点不同。</p><ol><li>频率学派认为世界是<strong>确定</strong>的，试图直接为「事件」本身建模，即事件在多次独立重复试验中发生的频率趋于极限$p$那么这个极限就是该事件的概率。<br>他们认为<em>模型参数是确定形式的一个未知变量</em>，希望通过类似方程组的方式从数据中求解。频率学派在对总体参数进行点估计时常采用的两种方式：矩估计和<strong>最大似然估计</strong>(Maximum Likelihood Estimation,MLE)，其中最大似然估计应用广泛，在<em>大样本量下</em>估计较好。<script type="math/tex; mode=display">\theta_{M L E}=\operatorname{argmax}_{\theta} p(D | \theta)</script></li><li>贝叶斯学派认为世界是<strong>不确定</strong>的，因获取的信息不同而异。从「观察者」角度出发，假设对事件有一个预先估计，通过获取的信息不断调整之前的预估计。同一件事情，由于观察者知识的不完备，所认为的事件状态也不同。<br>他们认为<em>模型参数服从某种潜在分布的随机变量</em>，希望从数据中推知该分布。基本思路是：假定要估计的模型参数是服从一定分布的随机变量，根据经验给出待估参数的先验分布（也称为主观分布），关于这些先验分布的信息被称为先验信息；然后根据这些先验信息，并与样本信息相结合，应用贝叶斯定理求出待估参数的后验分布；再应用损失函数，得出后验分布的一些特征值，并把它们作为待估参数的估计量。<strong>最大后验概率估计</strong>（Maximum A Posteriori Estimation，MAP），在先验假设比较靠谱的情况下效果显著，随着数据量的增加，先验假设对于模型参数的主导作用会逐渐削弱，真实的数据样例会占据有利地位。极端情况下，比如把先验假设去掉，或者假设先验满足均匀分布的话，那和极大似然估计就如出一辙了。<script type="math/tex; mode=display">\theta_{M A P}=\operatorname{argmax}_{\theta} p(D | \theta) p(\theta)</script>频率学派的代表是采用类条件概率密度进行最大似然估计；贝叶斯学派的代表是采用后验概率进行最大后验概率估计。两者都属于参数的点估计，MAP可看作对先验和MLE的折衷，数据量足够大时，两者趋于一致。  </li></ol><p>贝叶斯估计是MAP的进一步扩展，贝叶斯估计同样假定模型参数是一个随机变量，但并不是直接估计出参数的某个特定值，而是<strong>估计参数的分布</strong>，这是贝叶斯估计与最大后验概率估计不同的地方。</p><blockquote><p>方法对比</p><ol><li>模型选择：①计算复杂度：MLE简单微分运算，贝叶斯估计需要复杂多重积分，较难理解 ②准确性：小样本时贝叶斯框架允许通过新的数据获得的似然更新成为新的先验、并再次获得一个新后验，迭代循环更新。其估计误差更小。  </li><li>参数化估计的局限：MLE依赖所假设的概率分布正确性，贝叶斯推理依赖先验信息的正确性。  </li></ol></blockquote><h2 id="Bayes-theorem"><a href="#Bayes-theorem" class="headerlink" title="Bayes theorem"></a>Bayes theorem</h2><h3 id="条件概率"><a href="#条件概率" class="headerlink" title="条件概率"></a>条件概率</h3><p>联合概率与边缘概率关系：</p><script type="math/tex; mode=display">\begin{array}{l}{P(A=a)=\sum_{b} P(A=a, B=b)} \\ {P(A=b)=\sum_{a} P(A=a, B=b)}\end{array}</script><p>条件概率：</p><script type="math/tex; mode=display">{P(A | B)=\frac{P(A, B)}{P(B)}}</script><script type="math/tex; mode=display">{P(A, B)=P(B) * P(A | B)=P(A) * P(B | A)}</script><h3 id="全概率公式"><a href="#全概率公式" class="headerlink" title="全概率公式"></a>全概率公式</h3><script type="math/tex; mode=display">P(B)=P\left(B | A_{1}\right) P\left(A_{1}\right)+P\left(B | A_{2}\right) P\left(A_{2}\right)+\ldots+P\left(B | A_{n}\right) P\left(A_{n}\right)=\sum_{i=1}^{n} P\left(B | A_{i}\right) P\left(A_{i}\right)</script><p>可将复杂事件的概率求解转化为不同条件下简单事件的概率求和问题。</p><h3 id="贝叶斯公式"><a href="#贝叶斯公式" class="headerlink" title="贝叶斯公式"></a>贝叶斯公式</h3><script type="math/tex; mode=display">P(A | B)=\frac{P(B | A)}{P(B)} * P(A)</script><p>由全概率公式、贝叶斯公式可得：</p><script type="math/tex; mode=display">P\left(A_{i} | B\right)=\frac{P\left(B | A_{i}\right) P\left(A_{i}\right)}{P(B)}=\frac{P\left(B | A_{i}\right) P\left(A_{i}\right)}{\sum_{i=1}^{n} P\left(B | A_{i}\right) P\left(A_{i}\right)}</script><h3 id="贝叶斯法则"><a href="#贝叶斯法则" class="headerlink" title="贝叶斯法则"></a>贝叶斯法则</h3><blockquote><p>贝叶斯定理的意义在于使我们能利用已有的知识或信念（通常称为先验的）帮助计算相关事件的概率。    </p></blockquote><p>在贝叶斯统计中，<strong>先验概率</strong>分布是在没有获得某些新的信息前对$P(\theta)$的不确定性猜测进行量化，可量化为一个参数或一个潜在变量。其不仅依赖于主观经验估计，也依据已有经验知识进行推断。通常将先验概率乘以似然函数再归一化后，即得到参数的后验概率分布，后验概率分布是在给定数据下，$P(\theta)$的分布. </p><p>转化成数据与参数的角度思考贝叶斯定理：<br>$\theta$代表感兴趣的事件，为参数的集合，$D$ 代表所观察到的特定数据集合</p><script type="math/tex; mode=display">\underbrace{P(\theta | D )}_{\text { Posterior probability } }=\underbrace{P(\theta)}_{\text { Prior probability } } \times \underbrace{\frac{ {\overbrace{P(D  | \theta)}^{\text { Likelihood function } } } } {\underbrace{P(D )}_{\text { Standardized constant } } }  }_{\text { Standardized likelihood(updating prior)  } }</script><ul><li>$P(\theta)$为$\theta$的<em>先验概率</em>，代表我们根据经验或知识所相信的</li><li>$P(D | \theta)$,为在已知$\theta$下$D$发生的类条件概率 </li><li>$P(\theta|D )$为$\theta$的<em>后验概率</em>，即已知$D$下$\theta$的条件概率，这里称似然度</li><li>$P(D)$为数据分布，又称标化常量 </li></ul><p><strong>贝叶斯定理</strong>：指在概率统计中利用所观察到的现象或新获得的信息对有关概率分布的先验概率进行修正的方法，当样本量充分大时，样本中事件发生的概率将接近于总体中事件发生概率。</p><blockquote><p>频率派根据随机事件发生的频率赋值概率，贝叶斯派根据先验信息或背景知识赋值概率  </p></blockquote><h2 id="Likelihood-vs-Probability"><a href="#Likelihood-vs-Probability" class="headerlink" title="Likelihood vs Probability"></a>Likelihood vs Probability</h2><blockquote><p>Probability attaches to possible results; likelihood attaches to hypotheses.<br>The results to which probabilities attach are mutually exclusive and exhaustive; the hypotheses to which likelihoods attach are often neither; the range in one hypothesis may include the point in another.<sup><a href="#fn_1" id="reffn_1">1</a></sup>  </p></blockquote><h3 id="似然与概率"><a href="#似然与概率" class="headerlink" title="似然与概率"></a>似然与概率</h3><p>似然和概率同指事件发生的可能性，但在数理统计中含义不同，似然是贝叶斯统计的基石。<br>概率描述给定模型参数后，数据可能的结果，其概率之和为1.<br>似然描述给定特定观测值(数据)后，参数为随机变量，似然之和可能大于1.<br><strong>抛硬币试验</strong><sup><a href="#fn_2" id="reffn_2">2</a></sup><br>采用R的二项分布函数进行抛硬币试验，考虑参数：抛掷硬币次数，预测正面朝上的成功次数，预测正面朝上的成功的概率。<br><strong>概率</strong>：假定服从二项分布，已知参数：抛掷硬币次数=10，预测正面朝上的成功的概率=0.5，预测正面朝上的成功次数为随机变量<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">barplot(</span><br><span class="line">  dbinom(x = <span class="number">0</span>:<span class="number">10</span>, size = <span class="number">10</span>, prob = <span class="number">0.5</span>),</span><br><span class="line">  names.arg = <span class="number">0</span>:<span class="number">10</span>,</span><br><span class="line">  ylab=<span class="string">"Probability"</span>,</span><br><span class="line">  xlab=<span class="string">"Number of successes"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p><img src="http://wx3.sinaimg.cn/large/e775c73agy1g2wl3kuqnvj20dq0dkweo.jpg" alt="画出不同预测成功次数的概率图">  </p><p><strong>似然</strong>：已知参数：抛掷硬币次数=10，预测正面朝上的成功次数=8，预测正面朝上的成功的概率为随机变量<br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curve(</span><br><span class="line">  dbinom(<span class="number">8</span>,<span class="number">10</span>,x), xlim = c(<span class="number">0</span>,<span class="number">1</span>),</span><br><span class="line">  ylab=<span class="string">"Likelihood"</span>,</span><br><span class="line">  xlab=expression(paste(<span class="string">"Binomial "</span>, rho)),</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p><img src="http://wx1.sinaimg.cn/large/e775c73agy1g2wlfompg9j20de0c9q3a.jpg" alt="画出成功概率$p$的似然"></p><h3 id="似然函数与概率函数"><a href="#似然函数与概率函数" class="headerlink" title="似然函数与概率函数"></a>似然函数与概率函数</h3><p>对于</p><script type="math/tex; mode=display">P(D | \theta)</script><ol><li>如果$\theta$已知，$D$是变量，则称概率函数(probability function)，描述<strong>不同样本</strong>$D$出现的概率。</li><li>如果$\theta$为变量，$D$已知，则称似然函数(likelihood function), 描述对于<strong>不同的模型参数</strong>$\theta$下，$D$这个样本点出现的概率，也可记作$L(\theta |D)$或$L(D ; \theta)$或$f(D ; \theta)$。(似然函数的不同写法)<h3 id="推理公式"><a href="#推理公式" class="headerlink" title="推理公式"></a>推理公式</h3></li></ol><p>对离散函数 </p><script type="math/tex; mode=display">{L}(\theta |D)=P(D| \theta)</script><p>对连续函数</p><script type="math/tex; mode=display">{L}(\theta |D)=f(D| \theta)</script><blockquote><ol><li>给定参数后数据的概率等于给定数据后参数的似然度。</li><li>问题角度不同：一个是关于参数值：在给定D后，参数取特定值的似然度；一个关于数据：在给定参数条件下，观察到D的概率。   </li></ol><p><strong>注</strong>：1. 连续条件下似然函数不是概率密度函数，其积分和不为1，该似然函数指给定数据条件下参数值的概率，其与数据无关  </p></blockquote><h3 id="贝叶斯因子（Bayes-factor）"><a href="#贝叶斯因子（Bayes-factor）" class="headerlink" title="贝叶斯因子（Bayes factor）"></a>贝叶斯因子（Bayes factor）</h3><blockquote><p>模型选择与参数估计时，单个似然值无意义，似然是在比较中进行解释的 <sup><a href="#fn_3" id="reffn_3">3</a></sup>，<sup><a href="#fn_4" id="reffn_4">4</a></sup>  </p></blockquote><p>${H}_{0}:\theta=\theta_{0}$  </p><p>${H}_{1}:\theta$具有先验分布$P(\theta |{H}_{1})$。并可依据新data信息运用bayes原理更新$P({H}_{1})/P({H}_{0})$。  </p><p>在${H}_{0}$条件下，贝叶斯因子=似然比   </p><p>在${H}_{1}$条件下，相当于加权似然比，部分反映后验信息中，样本信息在三种信息（总体、先验、样本）中所起作用    </p><p>Bayes factor=1,代表样本信息无作用，先验信息准确<br>Bayes factor&gt;1,支持${H}_{1}$，样本信息更新了先验信息<br>Bayes factor&lt;1,支持${H}_{0}$，  </p><script type="math/tex; mode=display">\underbrace{\frac{P\left({H}_{1} |{D}\right)} {P\left({H}_{0} |D\right)} }_{\text { Posterior uncertainty } }=\underbrace{\frac{P\left({H}_{1}\right)} {P\left({H}_{0}\right)} }_{\text { Prior uncertainty } } \times \underbrace{\frac{P\left(D |{H}_{1}\right)} {P\left(D| {H}_{0}\right)} }_{\text { updating factor } }</script><h2 id="极大似然估计（MLE）"><a href="#极大似然估计（MLE）" class="headerlink" title="极大似然估计（MLE）"></a>极大似然估计（MLE）</h2><p>在实际问题中我们仅能获得有限样本数据，而先验概率和类条件概率未知。先验概率分布可依据经验知识或训练样本中各类的频率进行估计。而直接估计类条件概率的密度函数很难，<font color="#dd0000">极大似然估计将概率密度$p(D| \theta_{i})$转化为估计参数。</font><br><br><strong>前提</strong>：  </p><ol><li>样本分布代表其真实分布</li><li>样本集$D=\left\{x_{1}, x_{2}, x_{3}, \dots, x_{n}\right\}$中样本$x_{i}$满足独立同分布的随机变量(iid条件)</li><li>训练样本足够<br><strong>目的</strong>：利用已知样本结果，反推最大概率导致该结果的参数值。 <strong><em>模型已定，参数未知</em></strong><br><strong>核心思想</strong>：极大似然估计认为参数为固有的，但可能由于噪音干扰，存在误差。但只要在给定数据情况下，找到导致该结果概率最大的参数值即可，<font color="#dd0000">其实质为条件概率求最大解，即求使得$P(\theta|D )$最大的参数值$\theta$。</font><br></li></ol><p>由贝叶斯公式可知</p><script type="math/tex; mode=display">P(\theta | D) \propto P(D | \theta) \times P(\theta)</script><p>即可转化为</p><script type="math/tex; mode=display">\operatorname{argmax}_{\theta} p(\theta|D ){\Rightarrow}\operatorname{argmax}_{\theta} p(D| \theta)</script><h3 id="MLE模型推导"><a href="#MLE模型推导" class="headerlink" title="MLE模型推导"></a>MLE模型推导</h3><p>由全概率公式得</p><script type="math/tex; mode=display">\underbrace{l(\theta|D)=p(D| \theta)}_{\text {Likehood function}}=p\left(x_{1}, x_{2}, \cdots, x_{N} | \theta\right)=\prod_{i=1}^{N} p\left(x_{i} | \theta\right)</script><p>式中的$P(D| \theta)$即为似然函数，因最终求解的为似然最大的参数值，所以称似然估计。</p><h4 id="对数似然函数-拉普拉斯修正"><a href="#对数似然函数-拉普拉斯修正" class="headerlink" title="对数似然函数(拉普拉斯修正)"></a>对数似然函数(拉普拉斯修正)</h4><p>为防止先验概率为0导致似然函数为0，以及多先验概率相乘可能出现的下溢出，引入拉普拉斯修正。</p><script type="math/tex; mode=display">{L}(\theta | D)=\ln {l}(\theta |D)=\sum_{i=1}^{n} \ln p\left(x_{i} | \theta\right)</script><p>即求解</p><script type="math/tex; mode=display">\hat{\theta}=\arg \max _{\theta} L(\theta | D)</script><h4 id="MLE一般步骤5"><a href="#MLE一般步骤5" class="headerlink" title="MLE一般步骤5"></a>MLE一般步骤<sup><a href="#fn_5" id="reffn_5">5</a></sup></h4><ol><li>写出似然函数；</li><li>对似然函数取对数，并整理；</li><li>求导数</li><li>解似然方程。<h4 id="MLE特点"><a href="#MLE特点" class="headerlink" title="MLE特点"></a>MLE特点</h4></li><li>比其他估计方法简单</li><li>收敛性：无偏或者渐近无偏，当样本数目增加时，收敛性质会更好</li><li>如果假设的类条件概率模型正确，则通常能获得较好的结果。但如果假设模型出现偏差，将导致非常差的估计结果。<blockquote><p>可能存在问题:在实践中对数似然函数的导数仍然是难以解析的，最大似然估计不一定能精确地得到解。一般采用期望最大化（EM）算法等迭代方法为参数估计找到数值解。</p></blockquote></li></ol><h3 id="最小二乘参数估计"><a href="#最小二乘参数估计" class="headerlink" title="最小二乘参数估计"></a>最小二乘参数估计</h3><p>当模型被假设为高斯分布时，MLE 的估计等价于最小二乘法。<sup><a href="#fn_6" id="reffn_6">6</a></sup><br><strong>线性回归模型举例</strong><br>假设未知函数的参数形式为$f_{0}(x)=f\left(x, \alpha_{0}\right)$，$\alpha_{0}$为未知参数向量，存在已知密度函数$p(\xi_{i})$的可加噪音$\xi_{i}\sim N(0,\sigma^{2})$，对任意$x_{i}$的测量值为：</p><script type="math/tex; mode=display">y_{i}=f\left(x_{i}, \alpha_{0}\right)+\xi_{i}</script><p>目的：从函数空间$f\left(x, \alpha\right)$中利用上述被噪音干扰的观察值估计$f\left(x, \alpha_{0}\right)$.<br>最大似然估计：</p><script type="math/tex; mode=display">L(\alpha)=\sum_{i=1}^{\ell} \ln p\left(y_{i}-f\left(x_{i}, \alpha\right)\right)</script><p>而依据正态分布公式：</p><script type="math/tex; mode=display">p(\xi)=\frac{1}{\sigma \sqrt{2 \pi}} \exp \left\{-\frac{\xi^{2}}{2 \sigma^{2}}\right\}</script><p>最小二乘法：</p><script type="math/tex; mode=display">L^{*}(\alpha)=-\frac{1}{2 \sigma^{2}} \sum_{i=1}^{\ell}\left(y_{i}-f\left(x_{i}, \alpha\right)\right)^{2}-\ell \ln (\sqrt{2 \pi} \sigma)</script><p>即最大化$L^{*}(\alpha)$等于最小化最小二乘估计函数</p><script type="math/tex; mode=display">M(\alpha)=\sum_{i=1}^{\ell}\left(y_{i}-f\left(x_{i}, \alpha\right)\right)^{2}</script><h2 id="最大后验估计-MAP"><a href="#最大后验估计-MAP" class="headerlink" title="最大后验估计(MAP)"></a>最大后验估计(MAP)</h2><p><strong>目的</strong>： 最大化在给定数据样本情况下模型参数的后验概率<br><strong>核心思想</strong>：可将MAP看作正则化的MLE，引入模型参数先验假设，不再仅依靠数据样本。当$\theta$为均匀分布时，MLE与MAP等价。</p><p>相比MLE，MAP引入了先验概率$P(\theta)$：MLE从频率学派视角将$\theta$看作固定未知值，使得似然函数$P(D| \theta)$最大的参数即为最好的$\theta$；MAP从贝叶斯学派的观点出发，将$\theta$看作随机变量，其具有某种概率分布，即先验分布，认为应考虑$\theta$的先验分布$P(\theta)$，最大化函数为$P(D | \theta)P(\theta)$。由于$P(D)$可通过分析数据所得，则</p><script type="math/tex; mode=display">\underset{\theta}{\operatorname{argmax} } p(\theta |D)=\underset{\theta}{\operatorname{argmax} } \frac{p(D | \theta) p(\theta)}{p(D)} \propto \underset{\theta}{\operatorname{argmax} } p(D | \theta) p(\theta)=\underset{\theta}{\operatorname{argmax} } \sum_{i=1}^{n} \ln p\left(x_{i} | \theta\right)+ \ln p(\theta)</script><h3 id="MAP特点"><a href="#MAP特点" class="headerlink" title="MAP特点"></a>MAP特点</h3><h4 id="共轭分布"><a href="#共轭分布" class="headerlink" title="共轭分布"></a>共轭分布</h4><p>在贝叶斯统计中，如果后验分布与先验分布属于同类，则二者为共轭分布，而先验分布被称为似然函数的共轭先验。</p><h4 id="Beta-分布"><a href="#Beta-分布" class="headerlink" title="$Beta$分布"></a>$Beta$分布</h4><p>$Beta$是指定义在(0,1)区间的连续概率分布，有两个参数$\alpha, \beta&gt;0$.对于$X \sim B (\alpha, \beta)$，其概率密度为：</p><script type="math/tex; mode=display">\begin{aligned} f(x ; \alpha, \beta) &=\frac{x^{\alpha-1}(1-x)^{\beta-1} }{\int_{0}^{1} \mu^{\alpha-1}(1-\mu)^{\beta-1} d \mu} \\ &=\frac{\Gamma(\alpha+\beta)}{\Gamma(\alpha) \Gamma(\beta)} x^{\alpha-1}(1-x)^{\beta-1} \\ &=\frac{1}{B(\alpha, \beta)} x^{\alpha-1}(1-x)^{\beta-1} \end{aligned}</script><ol><li>当采用$Beta$分布描述先验概率时，可通过调节$\alpha, \beta$变化成各种形状，其足以表达事先对$\theta$的估计。</li><li>当采用$p(\theta) \sim B(\alpha, \beta)$，其后验概率分布$p(\theta|D )$亦服从$Beta$分布，使得贝叶斯分析得到简化。<blockquote><p>对任何指数家族成员，都存在一个共轭先验。对给定的概率分布$p(\theta|D )$，可寻求一个与该似然函数$p(D | \theta)$共轭的先验分布$p(\theta)$。 随着数据量的增加，先验假设的影响也会相应减弱。  </p></blockquote></li></ol><h3 id="MAP一般步骤7"><a href="#MAP一般步骤7" class="headerlink" title="MAP一般步骤7"></a>MAP一般步骤<sup><a href="#fn_7" id="reffn_7">7</a></sup></h3><ol><li>确定参数的先验分布以及似然函数；</li><li>确定参数的后验分布函数</li><li>将后验分布函数取对数，并整理；</li><li>求导数</li><li>求对数函数的最大值（求导，解方程）  </li></ol><h2 id="贝叶斯估计-Bayesian-Estimation"><a href="#贝叶斯估计-Bayesian-Estimation" class="headerlink" title="贝叶斯估计(Bayesian Estimation)"></a>贝叶斯估计(Bayesian Estimation)</h2><p>与MAP相比，贝叶斯估计同样假设$\theta$为一个随机变量，但并不直接估计出某个特定值，而是估计$\theta$的分布。  </p><h3 id="贝叶斯估计原理"><a href="#贝叶斯估计原理" class="headerlink" title="贝叶斯估计原理"></a>贝叶斯估计原理</h3><ol><li>依据全概率公式：  <script type="math/tex; mode=display">p(D)=\int_{\Theta} p(D | \theta) p(\theta) d \theta</script></li><li>样本服从iid条件，则样本集联合分布为：  <script type="math/tex; mode=display">p(D | \theta)=\prod_{i=1}^{n} p\left(x_{i} | \theta\right)</script></li><li><p>带入贝叶斯公式可得$\theta$的后验概率分布</p><script type="math/tex; mode=display">p(\theta | D)=\frac{\left(\prod_{i=1}^{n} p\left(x_{i} | \theta\right)\right) p(\theta)}{\int_{\Theta}\left(\prod_{i=1}^{n} p\left(x_{i} | \theta\right)\right) p(\theta) d \theta}</script></li><li><p>采用平方损失函数时，贝叶斯估计量：</p><script type="math/tex; mode=display">\hat{\theta}=\int_{\Theta} \theta p(\theta | D) d \theta</script><p>通过样本概率密度函数$p(x_{i}|D)$在所有可能的参数取值$\hat{\theta}_{i}$下加权平均为观测样本下估计出的参数$\theta$的后验概率。</p></li></ol><h3 id="Bayesian-Estimation特点"><a href="#Bayesian-Estimation特点" class="headerlink" title="Bayesian Estimation特点"></a>Bayesian Estimation特点</h3><ol><li>MLE与MAP直接估计参数值，而贝叶斯估计则是估计参数分布。</li><li>MAP在计算后验概率时，忽略了$p(D)$，贝叶斯估计时不可忽略。</li><li>贝叶斯估计的目的为计算整个后验概率的概率分布  </li></ol><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><strong>贝叶斯方法与经典估计方法比较</strong> <sup><a href="#fn_8" id="reffn_8">8</a></sup> </p><ol><li><strong>参数解释</strong>：经典估计方法如最小二乘估计、最大似然估计和广义矩估计均认为待估参数$\theta$为未知确定值，其估计量$\hat{\theta}$才存在随机性，如果$\hat{\theta}$无偏，则该$E{\hat{\theta} }= \theta$；而贝叶斯方法认为参数$\theta$为服从某分布的随机变量。</li><li><strong>利用信息程度</strong>：经典方法仅利用了样本信息，贝叶斯方法同时利用先验信息。</li><li><strong>随机误差</strong>：经典方法除最大似然法，在参数估计过程中不要求随机误差项的具体分布形式，但在假设检验与区间估计时需要；贝叶斯方法需要知道随机误差项的具体分布形式。</li><li><strong>参数估计量准则</strong>：经典估计方法以残差平方和最小或者以似然函数值最大为准则，构造极值条件，求解参数估计量；贝叶斯方法则需要构造一个损失函数，并以损失函数最小化为准则求得参数估计量。</li></ol><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><blockquote id="fn_1"><sup>1</sup>. <a href="https://www.psychologicalscience.org/observer/bayes-for-beginners-probability-and-likelihood" target="_blank" rel="noopener">Bayes for Beginners: Probability and Likelihood</a><a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a></blockquote><blockquote id="fn_2"><sup>2</sup>. <a href="https://acarril.github.io/posts/probability-likelihood" target="_blank" rel="noopener">The difference between probability and likelihood using coins</a><a href="#reffn_2" title="Jump back to footnote [2] in the text."> &#8617;</a></blockquote><blockquote id="fn_3"><sup>3</sup>. <a href="https://alexanderetz.com/2015/04/15/understanding-bayes-a-look-at-the-likelihood/" target="_blank" rel="noopener">Understanding Bayes: A Look at the Likelihood</a><a href="#reffn_3" title="Jump back to footnote [3] in the text."> &#8617;</a></blockquote><blockquote id="fn_4"><sup>4</sup>. <a href="https://www.bayesianspectacles.org/bayes-factors-for-those-who-hate-bayes-factors/" target="_blank" rel="noopener">Bayes Factors for Those Who Hate Bayes Factors</a><a href="#reffn_4" title="Jump back to footnote [4] in the text."> &#8617;</a></blockquote><blockquote id="fn_5"><sup>5</sup>. <a href="https://blog.csdn.net/zengxiantao1994/article/details/72787849" target="_blank" rel="noopener">极大似然估计详解</a><a href="#reffn_5" title="Jump back to footnote [5] in the text."> &#8617;</a></blockquote><blockquote id="fn_6"><sup>6</sup>. <a href="https://book.douban.com/subject/1756954/" target="_blank" rel="noopener">The Nature of Statistical Learning Theory</a><a href="#reffn_6" title="Jump back to footnote [6] in the text."> &#8617;</a></blockquote><blockquote id="fn_7"><sup>7</sup>. <a href="http://noahsnail.com/2018/05/17/2018-05-17-%E8%B4%9D%E5%8F%B6%E6%96%AF%E4%BC%B0%E8%AE%A1%E3%80%81%E6%9C%80%E5%A4%A7%E4%BC%BC%E7%84%B6%E4%BC%B0%E8%AE%A1%E3%80%81%E6%9C%80%E5%A4%A7%E5%90%8E%E9%AA%8C%E6%A6%82%E7%8E%87%E4%BC%B0%E8%AE%A1/" target="_blank" rel="noopener">贝叶斯估计、最大似然估计、最大后验概率估计</a><a href="#reffn_7" title="Jump back to footnote [7] in the text."> &#8617;</a></blockquote><blockquote id="fn_8"><sup>8</sup>. <a href="https://blog.csdn.net/zhangxueyang1/article/details/54176141" target="_blank" rel="noopener">贝叶斯定理与贝叶斯估计</a><a href="#reffn_8" title="Jump back to footnote [8] in the text."> &#8617;</a></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;频率学派与贝叶斯学派&quot;&gt;&lt;a href=&quot;#频率学派与贝叶斯学派&quot; class=&quot;headerlink&quot; title=&quot;频率学派与贝叶斯学派&quot;&gt;&lt;/a&gt;频率学派与贝叶斯学派&lt;/h2&gt;&lt;p&gt;频率学派与贝叶斯学派探讨「不确定性」这件事时的出发点与立足点不同。&lt;/p&gt;

      
    
    </summary>
    
      <category term="Theory" scheme="https://github.com/leeningzzu/leeningzzu.github.io/categories/Theory/"/>
    
      <category term="Mathematical statistics" scheme="https://github.com/leeningzzu/leeningzzu.github.io/categories/Theory/Mathematical-statistics/"/>
    
    
      <category term="Bayes principles" scheme="https://github.com/leeningzzu/leeningzzu.github.io/tags/Bayes-principles/"/>
    
  </entry>
  
  <entry>
    <title>The promise and perils of synthetic biology</title>
    <link href="https://github.com/leeningzzu/leeningzzu.github.io/posts/c3a61103/"/>
    <id>https://github.com/leeningzzu/leeningzzu.github.io/posts/c3a61103/</id>
    <published>2019-04-10T16:00:00.000Z</published>
    <updated>2019-05-10T06:28:02.617Z</updated>
    
    <content type="html"><![CDATA[<p> <center>The promise and perils of synthetic biology<center>  </center></center></p><h2 id="paragraph-1"><a href="#paragraph-1" class="headerlink" title="paragraph 1"></a>paragraph 1</h2><blockquote><p><em>Introduce the conventional point: gene mutation and natural selection</em>  </p><ol><li>the theory  </li><li>what happened with copying mistakenly  </li><li>the result of mistake  </li><li>the fundamental theory  </li></ol></blockquote><p>For the past four billion years or so <strong>the only way for life on Earth to</strong> produce a sequence of dna—a gene—<strong>was by</strong> copying a sequence it already had to hand<sup>1</sup>. Sometimes the gene would be damaged or <font color="red">scrambled</font>, the copying imperfect or undertaken repeatedly<sup>2</sup>. From that raw material arose <font color="red">the glories of</font> natural selection<sup>3</sup>. But beneath it all, gene begat gene<sup>4</sup>.</p><blockquote><p>damaged vs imperfect, scramble vs repeatd  </p><p><font color="red">scrambled</font>: [VERB 动词] (迅速地)爬,攀登；If you scramble over rocks or up a hill, you move quickly over them or up it using your hands to help you. [V prep/adv]  </p><p><font color="red">the glories of</font>: The glories of a culture or place are the things that people admire most about it. [usu pl]  </p></blockquote><h2 id="paragraph-2"><a href="#paragraph-2" class="headerlink" title="paragraph 2"></a>paragraph 2</h2><blockquote><p><em>Genes can be engineered artificially, not only by natural selection</em></p><ol><li>compare with the traditional situation</li><li>man-made genes can be done</li><li>a fundamental change with the ability</li><li>example: diffierent types of things were built by molecule</li><li>cells can be engineerable</li><li>examples</li></ol></blockquote><p>That is no longer true<sup>1</sup>. Now genes can be written <font color="red">from scratch</font> and edited repeatedly, like text in a word processor<sup>2</sup>. <strong>The ability</strong> to engineer living things which this provides <strong>represents</strong> a fundamental change in the way humans interact with the planet’s life<sup>3</sup>. It permits the manufacture of <font color="red">all manner of</font> things which used to be hard, even impossible, to make: pharmaceuticals, fuels, fabrics, foods and fragrances can all be built molecule by molecule<sup>4</sup>. What cells do and what they can become is engineerable, too<sup>5</sup>. Immune cells can be told to follow doctors’ orders; stem cells better <font color="red">coaxed</font> to turn into new tissues; fertilised eggs programmed to grow into creatures quite unlike their parents<sup>6</sup>.</p><blockquote><p><font color="red">from scratch</font>:[PHRASE 短语] 从零开始;从头做起;白手起家；If you do something from scratch, you do it without making use of anything that has been done before. [PHR after v]  </p><p><font color="red">all manner of</font>: idom, a lot of different types  </p><p><font color="red">coax</font>: [VERB 动词] 连哄带劝地得到；If you coax something such as information out of someone, you gently persuade them to give it to you. [V n out of/from n]</p><h2 id="paragrah-3"><a href="#paragrah-3" class="headerlink" title="paragrah 3"></a>paragrah 3</h2><p><em>the envision of synthetic biology</em>  </p><ol><li>the consequences of synthetic biology</li><li>the envision of biological manufacturing</li><li>example  </li></ol></blockquote><p>The earliest stages of such “synthetic biology” are already changing many industrial processes, transforming medicine and beginning to reach into the consumer world (see Technology Quarterly)<sup>1</sup>. Progress may be slow, but <strong>with the help of</strong> new tools <strong>and</strong> <font color="red">a big dollop of</font>  machine learning, biological manufacturing <strong>could eventually yield truly</strong> <font color="red">cornucopian</font> technologies<sup>2</sup>. Buildings may be grown from synthetic wood or coral<sup>3</sup>. Mammoths produced from engineered elephant cells may yet stride across Siberia<sup>4</sup>.</p><blockquote><p><font color="red">a big dollop of</font>: 少量，一点，些许 an amount of something  </p><p><font color="red">cornucopian</font>: adj. 丰富的,丰饶的</p><h2 id="paragraph-4"><a href="#paragraph-4" class="headerlink" title="paragraph 4"></a>paragraph 4</h2><p><em>we should harness the promise and minimise the peril of synthetic biology</em></p><ol><li>introduce the dark side of synthetic biology<br>2.look back through human history</li><li>side-effects with transformation</li><li>introuduce the drawback of synthetic biology</li><li>conclude the point</li></ol></blockquote><p>The scale of the potential changes seems hard to imagine<sup>1</sup>. But <font color="red">look back through</font> history, and humanity’s relations with the living world <strong>have seen</strong> three great transformations: the exploitation of fossil fuels, the globalisation of the world’s ecosystems after the European conquest of the Americas, and the <font color="red">domestication</font> of crops and animals at the dawn of agriculture<sup>2</sup>. <strong>All brought prosperity and progress, but with damaging side-effects</strong><sup>3</sup>. Synthetic biology promises similar transformation<sup>4</sup>. <strong>To harness the promise and minimise the peril, it pays to learn the lessons of the past</strong><sup>5</sup>.</p><blockquote><p><font color="red">domestication</font>: n. 驯养；教化</p><h2 id="paragraph-5"><a href="#paragraph-5" class="headerlink" title="paragraph 5"></a>paragraph 5</h2><p><em>benefits of synthetic biology on environmental goals in the exploitation of fossil fuels</em></p><ol><li>example</li><li>the value of fossil fuels on economy</li><li>the side-effects of fossil fuels on wilderness and climate</li><li>transition: the advantage of synthetic biology</li><li>replace some fuels</li><li>example: plant protein</li><li>the benefit explained furtherly</li><li>example  </li></ol></blockquote><p><strong>The new biology calls all in doubt</strong><br>Start with the most recent of these previous shifts<sup>1</sup>. Fossil fuels have enabled humans to <font color="red">drive remarkable economic expansion</font> in the present using biological productivity from ages past, stored away in coal and oil<sup>2</sup>. But much wilderness has been lost, and carbon atoms which last saw the atmosphere hundreds of millions of years ago <strong>have strengthened the planet’s greenhouse effect</strong> to a degree that may prove catastrophic<sup>3</sup>. Here, synthetic biology can do good<sup>4</sup>. It is already being used to replace some products made from petrochemicals; in time it could replace some fuels, too<sup>5</sup>. This week Burger King introduced into some of its restaurants a beefless Whopper that gets its meatiness from an engineered plant protein; such innovations could greatly ease a shift to less environmentally taxing diets<sup>6</sup>. They could also be used to do <font color="red">more with less</font><sup>7</sup>. Plants and their soil microbes could produce their own fertilisers and pesticides, ruminants less greenhouse gas—though to ensure that synthetic biology yields such <font color="red">laudable</font> environmental goals will take public policy as well as the cues of the market<sup>8</sup>.</p><blockquote><p><font color="red">more with less</font>: 以更小的资源完成更重的活  </p><p><font color="red">laudable</font>: [ADJ-GRADED 能被表示程度的副词或介词词组修饰的形容词] 可嘉的；值得赞美的；值得称许的；Something that is laudable deserves to be praised or admired. [Formal]</p><h2 id="paragraph-6"><a href="#paragraph-6" class="headerlink" title="paragraph 6"></a>paragraph 6</h2><p><em>the usage and the ideal of synthetic biology</em></p><ol><li>the usage of synthetic biology</li><li>transition</li><li>the fundamentation of synthetic biology application  </li><li>Realistic conditions </li><li>compare with the weapons using by armies.  </li><li>the ideal of synthetic biology</li><li>conclusion the view  </li></ol></blockquote><p>Synthetic biology could create such weapons by design: pathogens designed <strong>to weaken, to incapacitate or to kill, and perhaps also to limit</strong> themselves to particular types of target<sup>1</sup>. There is real cause for concern here—but not for immediate alarm<sup>2</sup>. For such weaponisation would, like the rest of  <font color="red">cutting-edge</font> synthetic biology, take highly skilled teams with significant resources<sup>3</sup>. And armies already have lots of ways to flatten cities and kill people in large numbers<sup>4</sup>. <strong>When it comes to</strong> mass destruction, a disease is a poor substitute for a nuke<sup>5</sup>. <strong>What’s more</strong>, today’s synthetic-biology community lives up to ideals of openness and public service better than many older fields<sup>6</sup>. <strong>Maintained and nurtured</strong>, that culture should serve as a powerful immune system against rogue elements<sup>7</sup>.</p><blockquote><p><font color="red">cutting-edge</font>: ① <strong>[ADJ 形容词]</strong> 最前沿的;最先进的;尖端的；Cutting-edge techniques or equipment are the most advanced that there are in a particular field. [usu ADJ n]<br>②[N-SING <strong>单数名词</strong>] (某事物发展的)尖端，最前沿，领先阶段；If you are at the cutting edge of a particular field of activity, you are involved in its most important or most exciting developments. [usu at/on the N of n]<br>③ [N-SING <strong>单数名词</strong>] 有利方面;优势；If someone or something gives you a cutting edge, they give you an advantage over your competitors.  </p><h2 id="paragraph-7"><a href="#paragraph-7" class="headerlink" title="paragraph 7"></a>paragraph 7</h2><p><em>the effect of domestication on human life</em>  </p><ol><li>the importance of biological transformation</li><li>instances</li><li>the results of domestication</li><li>the effect on human selves.</li></ol></blockquote><p>The earliest biological transformation—domestication—produced what was hitherto the biggest change in how humans lived their lives<sup>1</sup>. <font color="red">Haphazardly</font>, then purposefully, humans <strong>bred cereals to be more bountiful, livestock to be more docile, dogs more obedient and cats more companionable</strong> (the last a partial success, at best)<sup>2</sup>. This allowed new densities of settlement and new forms of social organisation: the market, the city, the state<sup>3</sup>. Humans domesticated themselves as well as their crops and animals, creating space for the <font color="red">drudgery</font> of subsistence agriculture and <font color="red">oppressive</font> political hierarchies<sup>4</sup>.  </p><blockquote><p><font color="red">drudgery</font>: [N-UNCOUNT 不可数名词] 单调乏味的苦差事;无聊的工作；You use drudgery to refer to jobs and tasks which are boring or unpleasant but which must be done  </p><p><font color="red">oppressive</font>: ① [ADJ-GRADED 能被表示程度的副词或介词词组修饰的形容词] 社会、法律、习俗等压迫的，压制的，暴虐的，不公的；If you describe a society, its laws, or customs as oppressive, you think they treat people cruelly and unfairly.<br>② [ADJ-GRADED 能被表示程度的副词或介词词组修饰的形容词] 社会、法律、习俗等压迫的，压制的，暴虐的，不公的；If you describe a society, its laws, or customs as oppressive, you think they treat people cruelly and unfairly.<br>③ [ADJ-GRADED 能被表示程度的副词或介词词组修饰的形容词] 令人心情沉重的；让人感到压抑的；使人苦恼的；An oppressive situation makes you feel depressed and uncomfortable. [usu ADJ n]  </p><h2 id="paragraph-8"><a href="#paragraph-8" class="headerlink" title="paragraph 8"></a>paragraph 8</h2><p><em>the effect of synthetic biology comparing with domestication</em>  </p><ol><li>correspond to the paragraph 7, describe the effect of synthetic biology</li><li>example</li><li>imaging what may happen in the future</li><li>the choose</li></ol></blockquote><p>Synthetic biology will have a similar <font color="red">cascading effect</font>, transforming humans’ relationships with each other and, potentially, their own biological nature<sup>1</sup>. The ability to reprogram the embryo is, <font color="red">rightly</font>, the site of most of today’s ethical concerns<sup>2</sup>. In future, they may extend further; what should one make of people with the upper-body strength of gorillas, or minds <font color="red">impervious</font> to sorrow<sup>3</sup>? How humans may choose to change themselves biologically is hard to say; that some choices will be controversial is not<sup>4</sup>.</p><blockquote><p><font color="red">cascading effect</font>: 级联效应  </p><p><font color="red">rightly</font>: correctly, or for a good reason正确地; 有道理地，有充分理由  </p><p><font color="red">impervious</font>: ①[ADJ-GRADED 能被表示程度的副词或介词词组修饰的形容词] 无动于衷的;不受影响的；If you are impervious to someone’s actions, you are not affected or influenced by them. [usu v-link ADJ]<br>②[ADJ 形容词] 防渗漏的;不能渗透的;不能穿过的；Something that is impervious to water, heat, or a particular object is able to resist it or stop it passing through it. [oft ADJ to n]</p><h2 id="paragraph-9"><a href="#paragraph-9" class="headerlink" title="paragraph 9"></a>paragraph 9</h2><p><em>conclude the unanticipated effects of synthetic biology</em></p><ol><li>introduce the cause of difference between the four transformation</li><li>retrosect</li><li>foresight</li><li>unanticipated effects</li><li>the driving force </li><li>the certain change</li><li>it is a double-edged sword  </li></ol></blockquote><p>Which leads to the main way in which this transformation differs from the three that came before<sup>1</sup>. Their significance was discovered only in <strong>retrospect</strong><sup>2</sup>. This time, there will be <strong>foresight</strong><sup>3</sup>. It will not be perfect: there will certainly be <strong>unanticipated effects</strong><sup>4</sup>. But synthetic biology will <strong>be driven by</strong> the pursuit of goals, both anticipated and desired<sup>5</sup>. It will challenge the human capacity for wisdom and foresight<sup>6</sup>. It might defeat it. But carefully nurtured, it might also help expand it<sup>7</sup>.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt; &lt;center&gt;The promise and perils of synthetic biology&lt;center&gt;  &lt;/center&gt;&lt;/center&gt;&lt;/p&gt;
&lt;h2 id=&quot;paragraph-1&quot;&gt;&lt;a href=&quot;#paragraph-1&quot; class=&quot;h
      
    
    </summary>
    
      <category term="The Economist" scheme="https://github.com/leeningzzu/leeningzzu.github.io/categories/The-Economist/"/>
    
      <category term="201904" scheme="https://github.com/leeningzzu/leeningzzu.github.io/categories/The-Economist/201904/"/>
    
    
      <category term="English Proficency" scheme="https://github.com/leeningzzu/leeningzzu.github.io/tags/English-Proficency/"/>
    
  </entry>
  
  <entry>
    <title>How to read The Economist</title>
    <link href="https://github.com/leeningzzu/leeningzzu.github.io/posts/e1de756f/"/>
    <id>https://github.com/leeningzzu/leeningzzu.github.io/posts/e1de756f/</id>
    <published>2019-04-09T04:56:06.000Z</published>
    <updated>2019-05-15T12:22:58.280Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>读书须知出入法。始当求所以入，终当求所以出。见得亲切，此是入书法；用得透脱，此是出书法。盖不能入得书，则不知古人用心处；不能出得书，则又死在言下。唯知出知入，得尽读书之法也.  </p><p align="right">--陈善《扪虱新话》</p></blockquote><h2 id="How-to-read-in-proper-way"><a href="#How-to-read-in-proper-way" class="headerlink" title="How to read in proper way"></a>How to read in proper way</h2><p>I have been reading The Economist since Nov 2018, but I did not feel I made some progress in writing and listening, there must be something wrong,there should be the right way to open it.  </p><p><strong>What should I grasp</strong></p><ul><li>the editorial stance  <blockquote><p>only when we get the real standpoint, can realize the value of the article</p></blockquote></li><li>the background information  <blockquote><p>the source of knowledge (Wiki,Google,literature) is the foundation   </p></blockquote></li><li>the vocabulary  </li></ul><ol><li>transitional words</li><li>the meaning in different situations</li><li>the synonyms</li></ol><h2 id="Choose-the-articles-to-read"><a href="#Choose-the-articles-to-read" class="headerlink" title="Choose the articles to read"></a>Choose the articles to read</h2><p>To be a learning animal, do not be an information hunger.</p><ul><li>[ ] Leaders or Free exchange</li><li>[ ] Books and arts</li><li>[ ] Obituary</li><li>[ ] regional articles</li></ul><h2 id="Persistence"><a href="#Persistence" class="headerlink" title="Persistence"></a>Persistence</h2><p>Only persistence makes progress. Yeah, I believe I can execute the plan, just do it.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;读书须知出入法。始当求所以入，终当求所以出。见得亲切，此是入书法；用得透脱，此是出书法。盖不能入得书，则不知古人用心处；不能出得书，则又死在言下。唯知出知入，得尽读书之法也.  &lt;/p&gt;
&lt;p align=&quot;right&quot;&gt;--陈善《扪虱新话》&lt;/p
      
    
    </summary>
    
      <category term="The Economist" scheme="https://github.com/leeningzzu/leeningzzu.github.io/categories/The-Economist/"/>
    
    
      <category term="English Proficency" scheme="https://github.com/leeningzzu/leeningzzu.github.io/tags/English-Proficency/"/>
    
  </entry>
  
  <entry>
    <title>serverless+travis-ci部署hexo博客</title>
    <link href="https://github.com/leeningzzu/leeningzzu.github.io/posts/fbf2107d/"/>
    <id>https://github.com/leeningzzu/leeningzzu.github.io/posts/fbf2107d/</id>
    <published>2019-02-28T19:09:06.000Z</published>
    <updated>2019-05-11T07:46:23.494Z</updated>
    
    <content type="html"><![CDATA[<h2 id="hexo-github构建"><a href="#hexo-github构建" class="headerlink" title="hexo + github构建"></a>hexo + github构建</h2><ol><li>下载部署git、hexo，主要参考<a href="https://zhuanlan.zhihu.com/p/35668237" target="_blank" rel="noopener">韦阳的博客</a></li><li>采用hux主题并进行优化</li></ol><ul><li>[x] 改善的SEO与title同步的情况</li><li>[x] 采用valine评论系统，删除多说及discuss</li><li>[x] 增加分享分能，文章标题上方添加tags及categories</li><li>[ ] 添加搜索功能</li><li>[ ] 将tags与categories合并为一页显示</li><li>[ ] 实现文章监听滚动功能</li></ul><p>注意事项： node的最新版本，以及hux博客的优化版本如<a href="https://github.com/CatherineLiyuankun/Hexo-theme-zilan">YuankunLi</a> and <a href="https://github.com/huweihuang/hexo-theme-huweihuang">huweihuang</a>。其中mathjax公式插件参考<a href="https://wudaijun.com/2017/12/hexo-with-mathjax/" target="_blank" rel="noopener">Hexo使用mathjax渲染公式</a><br>以及<a href="https://www.jianshu.com/p/68e6f82d88b7" target="_blank" rel="noopener">mathjax使用</a></p><h2 id="travis-ci"><a href="#travis-ci" class="headerlink" title="travis-ci"></a>travis-ci</h2><p>主要参考<a href="https://blog.qizhenjun.com/75a7da42/" target="_blank" rel="noopener">Travis CI自动部署Hexo博客到GitHub</a>及<a href="https://www.itfanr.cc/2017/08/09/using-travis-ci-automatic-deploy-hexo-blogs/" target="_blank" rel="noopener">使用Travis CI自动部署Hexo博客</a><br>注意事项：创建一个新分支<strong>hexo</strong>用于存放未进行构建的源码，而<strong>master</strong>分支为作为构建后输出目录，<strong>travis.yml</strong>跟踪监听<strong>hexo</strong>分支，并推送github的<strong>master</strong>分支</p><p><strong>git推送</strong><br><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"new blog"</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure></p><h2 id="采用腾讯云serverless-语雀进行自动化部署"><a href="#采用腾讯云serverless-语雀进行自动化部署" class="headerlink" title="采用腾讯云serverless +语雀进行自动化部署"></a>采用腾讯云serverless +语雀进行自动化部署</h2><p>注意事项：</p><ol><li>win10 不必要创建travis-ci私密密钥，cmd内已自带curl函数，administrator打开cmd可采用curl获取相应仓库id</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">"Travis-API-Version: 3"</span> -H <span class="string">"User-Agent: API Explorer"</span> \ -H <span class="string">"Authorization: token &lt;your_token&gt;"</span> \ https://api.travis-ci.org/owner/&lt;your_name&gt;/repos</span><br></pre></td></tr></table></figure><ol><li>因为在travis-ci部署中创建hexo分支进行监听，serverless函数中监听branch应为hexo<br><strong>Serverless</strong><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main_handler</span><span class="params">($event, $context)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 解析语雀post的数据</span></span><br><span class="line">    $update_title = <span class="string">''</span>;</span><br><span class="line">    <span class="keyword">if</span>($event-&gt;body)&#123;</span><br><span class="line">        $yuque_data= json_decode($event-&gt;body);</span><br><span class="line">        $update_title .= $yuque_data-&gt;data-&gt;title;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// default params</span></span><br><span class="line">    $repos = <span class="string">''</span>;  <span class="comment">// 你的仓库id 或 slug</span></span><br><span class="line">    $token = <span class="string">''</span>; <span class="comment">// 你的登录token</span></span><br><span class="line">    $message = date(<span class="string">"Y/m/d"</span>).<span class="string">':yuque update:'</span>.$update_title;</span><br><span class="line">    $branch = <span class="string">'hexo'</span>;</span><br><span class="line">    <span class="comment">// post params</span></span><br><span class="line">    $queryString = $event-&gt;queryString;</span><br><span class="line">    $q_token = $queryString-&gt;token ? $queryString-&gt;token : $token;</span><br><span class="line">    $q_repos = $queryString-&gt;repos ? $queryString-&gt;repos : $repos;</span><br><span class="line">    $q_message = $queryString-&gt;message ? $queryString-&gt;message : $message;</span><br><span class="line">    $q_branch = $queryString-&gt;branch ? $queryString-&gt;branch : <span class="string">'hexo'</span>;</span><br><span class="line">    <span class="keyword">echo</span>($q_token);</span><br><span class="line">    <span class="keyword">echo</span>(<span class="string">'==='</span>);</span><br><span class="line">    <span class="keyword">echo</span> ($q_repos);</span><br><span class="line">    <span class="keyword">echo</span> (<span class="string">'==='</span>);</span><br><span class="line">    <span class="keyword">echo</span> ($q_message);</span><br><span class="line">    <span class="keyword">echo</span> (<span class="string">'==='</span>);</span><br><span class="line">    <span class="keyword">echo</span> ($q_branch);</span><br><span class="line">    <span class="keyword">echo</span> (<span class="string">'==='</span>);</span><br><span class="line">    <span class="comment">//request travis ci</span></span><br><span class="line">    $res_info = triggerTravisCI($q_repos, $q_token, $q_message, $q_branch);</span><br><span class="line"></span><br><span class="line">    $res_code = <span class="number">0</span>;</span><br><span class="line">    $res_message = <span class="string">'未知'</span>;</span><br><span class="line">    <span class="keyword">if</span>($res_info[<span class="string">'http_code'</span>])&#123;</span><br><span class="line">        $res_code = $res_info[<span class="string">'http_code'</span>];</span><br><span class="line">        <span class="keyword">switch</span>($res_info[<span class="string">'http_code'</span>])&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="number">202</span>:</span><br><span class="line">                $res_message = <span class="string">'success'</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                $res_message = <span class="string">'faild'</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    $res = <span class="keyword">array</span>(</span><br><span class="line">        <span class="string">'status'</span>=&gt;$res_code,</span><br><span class="line">        <span class="string">'message'</span>=&gt;$res_message</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> $res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@description</span>  travis api , trigger a build</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> $repos string 仓库ID、slug</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> $token string 登录验证token</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> $message string 触发信息</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> $branch string 分支</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> $info array 回包信息</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">triggerTravisCI</span> <span class="params">($repos, $token, $message=<span class="string">'yuque update'</span>, $branch=<span class="string">'hexo'</span>)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//初始化</span></span><br><span class="line">    $curl = curl_init();</span><br><span class="line">    <span class="comment">//设置抓取的url</span></span><br><span class="line">    curl_setopt($curl, CURLOPT_URL, <span class="string">'https://api.travis-ci.org/repo/'</span>.$repos.<span class="string">'/requests'</span>);</span><br><span class="line">    <span class="comment">//设置获取的信息以文件流的形式返回，而不是直接输出。</span></span><br><span class="line">    curl_setopt($curl, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//设置post方式提交</span></span><br><span class="line">    curl_setopt($curl, CURLOPT_CUSTOMREQUEST, <span class="string">"POST"</span>);</span><br><span class="line">    <span class="comment">//设置post数据</span></span><br><span class="line">    $post_data = json_encode(<span class="keyword">array</span>(</span><br><span class="line">        <span class="string">"request"</span>=&gt; <span class="keyword">array</span>(</span><br><span class="line">            <span class="string">"message"</span>=&gt;$message,</span><br><span class="line">            <span class="string">"branch"</span>=&gt;$branch</span><br><span class="line">        )</span><br><span class="line">    ));</span><br><span class="line">    $header = <span class="keyword">array</span>(</span><br><span class="line">      <span class="string">'Content-Type: application/json'</span>,</span><br><span class="line">      <span class="string">'Travis-API-Version: 3'</span>,</span><br><span class="line">      <span class="string">'Authorization:token '</span>.$token,</span><br><span class="line">      <span class="string">'Content-Length:'</span> . strlen($post_data)</span><br><span class="line">    );</span><br><span class="line">    curl_setopt($curl, CURLOPT_HTTPHEADER, $header);</span><br><span class="line">    curl_setopt($curl, CURLOPT_POSTFIELDS, $post_data);</span><br><span class="line">    <span class="comment">//执行命令</span></span><br><span class="line">    $data = curl_exec($curl);</span><br><span class="line">    $info = curl_getinfo($curl);</span><br><span class="line">    <span class="comment">//关闭URL请求</span></span><br><span class="line">    curl_close($curl);</span><br><span class="line">    <span class="keyword">return</span> $info;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>3.语雀webhook配置时</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://service-&lt;…………&gt;.ap-guangzhou.apigateway.myqcloud.com/release/main_handler?repos=&lt;your travis's repo ID&gt;&amp;token=&lt;your travis token&gt;&amp;message=语雀自动提交&amp;branch=hexo</span><br></pre></td></tr></table></figure><p>主要参考<a href="https://segmentfault.com/a/1190000017797561" target="_blank" rel="noopener">Nero大神</a>，<a href="https://rayleeafar.github.io/2019/01/17/yuque/%E8%AF%A6%E7%BB%86Hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%EF%BC%9A%E4%BA%91%E7%AB%AF%E5%86%99%E4%BD%9C+%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA+%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2/" target="_blank" rel="noopener">raylee</a>,以及<a href="https://iszengmh.github.io/2019/01/27/yuque/%E8%AF%AD%E9%9B%80%E4%B9%8B%E8%AF%AD%E9%9B%80+serverless+travis%20CI+hexo+github%E6%90%AD%E5%BB%BA%E4%BA%91%E5%86%99%E4%BD%9C%E5%8D%9A%E5%AE%A2/" target="_blank" rel="noopener">Zen</a></p><h2 id="语雀使用体会"><a href="#语雀使用体会" class="headerlink" title="语雀使用体会"></a>语雀使用体会</h2><ol><li>方便快捷，类似于word的可视化,自动同步</li><li>支持markdown功能较少，front-matter实现不佳，尚不支持公式编辑，功能尚需完善</li><li>目前以travis-ci 本地自动部署为主</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;hexo-github构建&quot;&gt;&lt;a href=&quot;#hexo-github构建&quot; class=&quot;headerlink&quot; title=&quot;hexo + github构建&quot;&gt;&lt;/a&gt;hexo + github构建&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;下载部署git、hexo，主要参
      
    
    </summary>
    
      <category term="Software and Skillings" scheme="https://github.com/leeningzzu/leeningzzu.github.io/categories/Software-and-Skillings/"/>
    
      <category term="Skillings" scheme="https://github.com/leeningzzu/leeningzzu.github.io/categories/Software-and-Skillings/Skillings/"/>
    
    
      <category term="blog" scheme="https://github.com/leeningzzu/leeningzzu.github.io/tags/blog/"/>
    
      <category term="hexo" scheme="https://github.com/leeningzzu/leeningzzu.github.io/tags/hexo/"/>
    
  </entry>
  
</feed>
